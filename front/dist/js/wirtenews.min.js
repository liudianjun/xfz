function News(){}News.prototype.listenUploadBtn=function(){var e=$("#upload-btn");e.change(function(){var t=e[0].files[0],n=new FormData;n.append("file",t),xfzajax.post({url:"/cms/upload_file/",data:n,processData:!1,contentType:!1,success:function(t){200===t.code&&$("#thumbnail-form").val(t.data.url)}})})},News.prototype.initUEditor=function(){window.ue=UE.getEditor("editor",{initialFrameHeight:300,serverUrl:"/ueditor/upload/"})},News.prototype.listenPubNews=function(){$("#pub-btn").click(function(t){t.preventDefault();var n=$("input[name='title']").val(),e=$("input[name='desc']").val(),o=$("input[name='thumbnail']").val(),i=window.ue.getContent();console.log(n),xfzajax.post({url:"/cms/writenews",data:{title:n,category:5,desc:e,thumbnail:o,content:i},success:function(t){200===t.code&&xfzalert.alertSuccess("发布成功",function(){window.location.reload()})}})})},News.prototype.run=function(){this.listenUploadBtn(),this.initUEditor(),this.listenPubNews()},$(function(){(new News).run()});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndpcnRlbmV3cy5qcyJdLCJuYW1lcyI6WyJOZXdzIiwicHJvdG90eXBlIiwibGlzdGVuVXBsb2FkQnRuIiwidXBsb2FkQnRuIiwiJCIsImNoYW5nZSIsImZpbGUiLCJmaWxlcyIsImZvcm1EYXRhIiwiRm9ybURhdGEiLCJhcHBlbmQiLCJ4ZnphamF4IiwicG9zdCIsInVybCIsImRhdGEiLCJwcm9jZXNzRGF0YSIsImNvbnRlbnRUeXBlIiwic3VjY2VzcyIsInJlc3VsdCIsInZhbCIsImluaXRVRWRpdG9yIiwid2luZG93IiwidWUiLCJVRSIsImdldEVkaXRvciIsImluaXRpYWxGcmFtZUhlaWdodCIsInNlcnZlclVybCIsImxpc3RlblB1Yk5ld3MiLCJjbGljayIsImV2ZW50IiwicHJldmVudERlZmF1bHQiLCJ0aXRsZSIsImRlc2MiLCJ0aHVtYm5haWwiLCJjb250ZW50IiwiZ2V0Q29udGVudCIsImNvbnNvbGUiLCJsb2ciLCJjYXRlZ29yeSIsInhmemFsZXJ0IiwiYWxlcnRTdWNjZXNzIiwibG9jYXRpb24iLCJyZWxvYWQiLCJydW4iLCJ0aGlzIl0sIm1hcHBpbmdzIjoiQUFBQSxTQUFTQSxRQUlUQSxLQUFLQyxVQUFVQyxnQkFBa0IsV0FDN0IsSUFDSUMsRUFBWUMsRUFBRSxlQUNsQkQsRUFBVUUsT0FBTyxXQUNiLElBQUlDLEVBQU9ILEVBQVUsR0FBR0ksTUFBTSxHQUMxQkMsRUFBVyxJQUFJQyxTQUNuQkQsRUFBU0UsT0FBTyxPQUFPSixHQUV2QkssUUFBUUMsS0FBSyxDQUNUQyxJQUFNLG9CQUNOQyxLQUFPTixFQUNQTyxhQUFjLEVBQ2RDLGFBQWMsRUFDZEMsUUFBVSxTQUFVQyxHQUNLLE1BQWxCQSxFQUFhLE1BRVNkLEVBQUUsbUJBQ1JlLElBQUlELEVBQWEsS0FBTyxXQU8zRGxCLEtBQUtDLFVBQVVtQixZQUFjLFdBRXpCQyxPQUFPQyxHQUFLQyxHQUFHQyxVQUFVLFNBQVUsQ0FDL0JDLG1CQUFxQixJQUVyQkMsVUFBWSxzQkFPcEIxQixLQUFLQyxVQUFVMEIsY0FBZ0IsV0FFZHZCLEVBQUUsWUFDUndCLE1BQU0sU0FBVUMsR0FDbkJBLEVBQU1DLGlCQUNOLElBQUlDLEVBQVEzQixFQUFFLHVCQUF1QmUsTUFFakNhLEVBQU81QixFQUFFLHNCQUFzQmUsTUFDL0JjLEVBQVk3QixFQUFFLDJCQUEyQmUsTUFDekNlLEVBQVViLE9BQU9DLEdBQUdhLGFBQ3hCQyxRQUFRQyxJQUFJTixHQUdacEIsUUFBUUMsS0FBSyxDQUNUQyxJQUFNLGlCQUNOQyxLQUFPLENBQ0hpQixNQUFRQSxFQUNSTyxTQUFXLEVBQ1hOLEtBQU9BLEVBQ1BDLFVBQVlBLEVBQ1pDLFFBQVVBLEdBR2RqQixRQUFVLFNBQVVDLEdBRU0sTUFBbkJBLEVBQWEsTUFDWnFCLFNBQVNDLGFBQWEsT0FBUSxXQUMxQm5CLE9BQU9vQixTQUFTQyxpQkFVeEMxQyxLQUFLQyxVQUFVMEMsSUFBTSxXQUNqQkMsS0FBSzFDLGtCQUNMMEMsS0FBS3hCLGNBQ0x3QixLQUFLakIsaUJBR1R2QixFQUFFLFlBQ1ksSUFBSUosTUFDVDJDIiwiZmlsZSI6IndpcnRlbmV3cy5qcyIsInNvdXJjZXNDb250ZW50IjpbImZ1bmN0aW9uIE5ld3MoKSB7XG5cbn1cblxuTmV3cy5wcm90b3R5cGUubGlzdGVuVXBsb2FkQnRuID0gZnVuY3Rpb24oKXtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgdmFyIHVwbG9hZEJ0biA9ICQoXCIjdXBsb2FkLWJ0blwiKTtcbiAgICB1cGxvYWRCdG4uY2hhbmdlKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGZpbGUgPSB1cGxvYWRCdG5bMF0uZmlsZXNbMF07XG4gICAgICAgIHZhciBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YSgpO1xuICAgICAgICBmb3JtRGF0YS5hcHBlbmQoXCJmaWxlXCIsZmlsZSk7XG5cbiAgICAgICAgeGZ6YWpheC5wb3N0KHtcbiAgICAgICAgICAgIFwidXJsXCI6XCIvY21zL3VwbG9hZF9maWxlL1wiLFxuICAgICAgICAgICAgXCJkYXRhXCI6Zm9ybURhdGEsXG4gICAgICAgICAgICBcInByb2Nlc3NEYXRhXCI6ZmFsc2UsXG4gICAgICAgICAgICBcImNvbnRlbnRUeXBlXCI6ZmFsc2UsXG4gICAgICAgICAgICBcInN1Y2Nlc3NcIjpmdW5jdGlvbiAocmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgaWYocmVzdWx0W1wiY29kZVwiXSA9PT0yMDApe1xuICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhyZXN1bHRbXCJkYXRhXCJdKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRodW1ibmFpbElucHV0ID0gJChcIiN0aHVtYm5haWwtZm9ybVwiKTtcbiAgICAgICAgICAgICAgICAgICAgdGh1bWJuYWlsSW5wdXQudmFsKHJlc3VsdFtcImRhdGFcIl1bXCJ1cmxcIl0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgIH0pO1xufTtcblxuTmV3cy5wcm90b3R5cGUuaW5pdFVFZGl0b3IgPSBmdW5jdGlvbigpe1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICB3aW5kb3cudWUgPSBVRS5nZXRFZGl0b3IoXCJlZGl0b3JcIiwge1xuICAgICAgICBcImluaXRpYWxGcmFtZUhlaWdodFwiOjMwMCxcbiAgICAgICAgLy/kuIrkvKDlm77niYcg6KeG6aKRXG4gICAgICAgIFwic2VydmVyVXJsXCI6XCIvdWVkaXRvci91cGxvYWQvXCIsXG4gICAgICAgIC8vIOS4iuS8oOaWueW8j1xuXG4gICAgfSk7XG5cbn07XG5cbk5ld3MucHJvdG90eXBlLmxpc3RlblB1Yk5ld3MgPSBmdW5jdGlvbigpe1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICB2YXIgcHViYnRuID0gJChcIiNwdWItYnRuXCIpO1xuICAgIHB1YmJ0bi5jbGljayhmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgdmFyIHRpdGxlID0gJChcImlucHV0W25hbWU9J3RpdGxlJ11cIikudmFsKCk7XG4gICAgICAgIC8vIHZhciBjYXRlZ29yeSA9ICQoXCJzZWxlY3QgW25hbWU9J2NhdGVnb3J5J11cIikudmFsKCk7XG4gICAgICAgIHZhciBkZXNjID0gJChcImlucHV0W25hbWU9J2Rlc2MnXVwiKS52YWwoKTtcbiAgICAgICAgdmFyIHRodW1ibmFpbCA9ICQoXCJpbnB1dFtuYW1lPSd0aHVtYm5haWwnXVwiKS52YWwoKTtcbiAgICAgICAgdmFyIGNvbnRlbnQgPSB3aW5kb3cudWUuZ2V0Q29udGVudCgpO1xuICAgICAgICBjb25zb2xlLmxvZyh0aXRsZSk7XG4gICAgICAgIC8vIGNvbnNvbGUubG9nKGNhdGVnb3J5KTtcblxuICAgICAgICB4ZnphamF4LnBvc3Qoe1xuICAgICAgICAgICAgXCJ1cmxcIjpcIi9jbXMvd3JpdGVuZXdzXCIsXG4gICAgICAgICAgICBcImRhdGFcIjp7XG4gICAgICAgICAgICAgICAgXCJ0aXRsZVwiOnRpdGxlLFxuICAgICAgICAgICAgICAgIFwiY2F0ZWdvcnlcIjo1LFxuICAgICAgICAgICAgICAgIFwiZGVzY1wiOmRlc2MsXG4gICAgICAgICAgICAgICAgXCJ0aHVtYm5haWxcIjp0aHVtYm5haWwsXG4gICAgICAgICAgICAgICAgXCJjb250ZW50XCI6Y29udGVudCxcblxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIFwic3VjY2Vzc1wiOmZ1bmN0aW9uIChyZXN1bHQpIHtcblxuICAgICAgICAgICAgICAgIGlmKHJlc3VsdFtcImNvZGVcIl0gPT09IDIwMCl7XG4gICAgICAgICAgICAgICAgICAgIHhmemFsZXJ0LmFsZXJ0U3VjY2VzcyhcIuWPkeW4g+aIkOWKn1wiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24ucmVsb2FkKClcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlcblxuXG4gICAgfSk7XG59O1xuTmV3cy5wcm90b3R5cGUucnVuID0gZnVuY3Rpb24oKXtcbiAgICB0aGlzLmxpc3RlblVwbG9hZEJ0bigpO1xuICAgIHRoaXMuaW5pdFVFZGl0b3IoKTtcbiAgICB0aGlzLmxpc3RlblB1Yk5ld3MoKTtcbn07XG5cbiQoZnVuY3Rpb24gKCkge1xuICAgdmFyIG5ld3MgPSBuZXcgTmV3cygpO1xuICAgIG5ld3MucnVuKClcbn0pOyJdfQ==
